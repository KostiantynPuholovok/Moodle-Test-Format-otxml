<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
	<xsl:strip-space elements="*"/>
	<xsl:template match="/">
			<opentest_xml type="tests_xml" format_version="2.0">
				<test disabled="0">
					<xsl:for-each select="quiz">
						<test_name>
							<xsl:value-of disable-output-escaping="yes" select="question/category/text"/>
						</test_name>
						<content>
						<topic disabled="0">
							<topic_name>
								<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
								<xsl:value-of disable-output-escaping="yes" select="question/name/text"/>
								<xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
							</topic_name>
							<content>
								<xsl:apply-templates/>
							</content>
						</topic>
						</content>
					</xsl:for-each>
				</test>
			</opentest_xml>
	</xsl:template>

	<xsl:template match="//question[@type='multichoice']">
		<question question_type="1" answers_delay="0" question_difficulty="1" disabled="1">
			<question_text>
				<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
				<xsl:value-of disable-output-escaping="yes" select="questiontext/text"/>
				<xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
			</question_text>
			<content>
				<xsl:for-each select="answer">
					<answer true="{@fraction div 100}" true_percent="0" sample="" use_regexp="0">
						<serialized_regexp></serialized_regexp>
                		<answer_text>
               				<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
               				<xsl:value-of disable-output-escaping="yes" select="text"/>
               				<xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
               			</answer_text>
              		</answer>
				</xsl:for-each>
			</content>
		</question>
	</xsl:template>
</xsl:stylesheet>
