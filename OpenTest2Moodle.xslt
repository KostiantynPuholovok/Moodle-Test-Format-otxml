<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version = "1.0"  xmlns:xsl = "http://www.w3.org/1999/XSL/Transform">
    	<xsl:template match="/">
    		<quiz>
                <xsl:for-each select="opentest_xml/test/content/topic">
    			<question type="category">
    				<category>
    					<text>
					    <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
					    <xsl:value-of disable-output-escaping="yes" select="topic_name"/>
					    <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
					</text>
    				</category>
    			</question>
                <xsl:apply-templates/>
                </xsl:for-each>
    		</quiz>
    	</xsl:template>
		
		<xsl:template match="//question[@question_type='1']">
                <question type="multichoice">

                    <name>
                        <text>
                            <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                            <p><xsl:value-of disable-output-escaping="yes" select="question_text"/></p>
                            <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                        </text>
                    </name>
                    
                    <questiontext format="html">
                        <text>
                            <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                            <p><xsl:value-of disable-output-escaping="yes" select="question_text"/></p>
                            <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                        </text>
                    </questiontext>
                    <generalfeedback format="html">
                        <text></text>
                    </generalfeedback>
                    <defaultgrade>1.0000000</defaultgrade>
                    <penalty>0.3333333</penalty>
                    <hidden>0</hidden>
                    <single>true</single>
                    <shuffleanswers>1</shuffleanswers>
                    <answernumbering>abcde</answernumbering>
                    <correctfeedback format="html">
                        <text></text>
                    </correctfeedback>
                    <partiallycorrectfeedback format="html">
                        <text></text>
                    </partiallycorrectfeedback>
                    <incorrectfeedback format="html">
                        <text></text>
                    </incorrectfeedback>
                    <shownumcorrect/>
                    <xsl:for-each select="content/answer">                        
                        <answer fraction="{@true*100}" format="html">
                            <text><xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text> 
                            <p><xsl:value-of disable-output-escaping="yes" select="answer_text"/></p>
                            <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                            </text>
                            <feedback format="html">
                                <text></text>
                            </feedback>
                        </answer>                       
                    </xsl:for-each>
                    </question>
        </xsl:template>

        <xsl:template match="//question[@question_type='2']">
                <question type="multichoice">

                    <name>
                        <text>
			    <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                            <p><xsl:value-of disable-output-escaping="yes" select="question_text"/></p>
                            <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                        </text>
                    </name>
                    
                    <questiontext format="html">
                        <text>
                            <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                            <p><xsl:value-of disable-output-escaping="yes" select="question_text"/></p>
                            <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                        </text>
                    </questiontext>
                    <generalfeedback format="html">
                        <text></text>
                    </generalfeedback>
                    <defaultgrade>1.0000000</defaultgrade>
                    <penalty>0.0000000</penalty>
                    <hidden>0</hidden>
                    <single>true</single>
                    <shuffleanswers>1</shuffleanswers>
                    <answernumbering>abcde</answernumbering>
                    <correctfeedback format="html">
                        <text></text>
                    </correctfeedback>
                    <partiallycorrectfeedback format="html">
                        <text></text>
                    </partiallycorrectfeedback>
                    <incorrectfeedback format="html">
                        <text></text>
                    </incorrectfeedback>
                    <shownumcorrect/>
                    <xsl:for-each select="content/answer">                        
                        <answer fraction="{@true*100}" format="html">
                            <text><xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
                            <p><xsl:value-of disable-output-escaping="yes" select="answer_text"/></p>
                            <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
                            </text>
                            <feedback format="html">
                                <text></text>
                            </feedback>
                        </answer>                       
                    </xsl:for-each>
                    </question>
        </xsl:template>
    </xsl:stylesheet>